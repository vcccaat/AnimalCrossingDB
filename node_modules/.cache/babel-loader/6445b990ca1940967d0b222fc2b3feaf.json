{"ast":null,"code":"import _classCallCheck from\"/Users/sze/Desktop/AnimalCrossingDB/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sze/Desktop/AnimalCrossingDB/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/sze/Desktop/AnimalCrossingDB/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/sze/Desktop/AnimalCrossingDB/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import CardList from'../components/CardList';import SearchBox from'../components/SearchBox';import{Region,Month,Category,FilterPrice}from'../components/Filter';// import Scroll from '../components/Scroll';\nimport'./App.css';import ReactSpinner from'react-bootstrap-spinner';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);_this=_super.call(this);_this.loadpage=function(){fetch(\"https://acnhapi.com/v1/\".concat(_this.state.category,\"/\")).then(function(response){return response.json();}).then(function(items){_this.setState({items:items,isLoading:false});});};_this.onSearchChange=function(event){_this.setState({searchfield:event.target.value});};_this.setRegion=function(region){_this.setState({region:region});};_this.setMonth=function(month){_this.setState({month:month});};_this.setCategory=function(category){_this.setState({category:category,isLoading:true,region:'',month:'',rank:''});};_this.setRank=function(choice){_this.setState({rank:choice});};_this.filterItem=function(array,searchfield){// search filter\nvar filteredItem=array;filteredItem=array.filter(function(a){return a[1].name['name-CNzh'].includes(searchfield);});if(_this.state.category==='villagers'){return filteredItem;}// rank filter\nif(_this.state.rank===1){filteredItem=filteredItem.sort(function(a,b){return b[1].price-a[1].price;});}if(_this.state.rank===-1){filteredItem=filteredItem.sort(function(a,b){return a[1].price-b[1].price;});}// month filter\nif(_this.state.region!==''&&_this.state.month!==''){filteredItem=filteredItem.filter(function(item){var region=_this.state.region==='month-southern'?'month-array-southern':'month-array-northern';var monthArray=item[1].availability[region];return monthArray.includes(_this.state.month);});}return filteredItem;};_this.state={items:[],searchfield:'',region:'',month:'',category:'fish',rank:'',//0图鉴顺序; 1从高到低; -1从低到高\nisLoading:true};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){this.loadpage();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){// if (this.state.category === 'villagers') {\n//   this.setState({region: '',\n//   month: '',\n//   rank: ''\n// })\n// }\nthis.loadpage();}},{key:\"render\",value:function render(){var _this$state=this.state,items=_this$state.items,searchfield=_this$state.searchfield;var items_array=Object.entries(items);items_array=this.filterItem(items_array,searchfield);return this.state.isLoading?/*#__PURE__*/React.createElement(\"div\",{className:\"tc loading\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Loading\"),/*#__PURE__*/React.createElement(ReactSpinner,{type:\"grow\",color:\"secondary\"}),/*#__PURE__*/React.createElement(ReactSpinner,{type:\"grow\",color:\"secondary\"}),/*#__PURE__*/React.createElement(ReactSpinner,{type:\"grow\",color:\"secondary\"})):/*#__PURE__*/React.createElement(\"div\",{className:\"tc\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"f1\"},\"Animal Crossing\"),/*#__PURE__*/React.createElement(\"div\",{className:\"filter-row\"},/*#__PURE__*/React.createElement(Region,{setRegion:this.setRegion}),/*#__PURE__*/React.createElement(Month,{setMonth:this.setMonth}),/*#__PURE__*/React.createElement(Category,{setCategory:this.setCategory}),/*#__PURE__*/React.createElement(SearchBox,{searchChange:this.onSearchChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"filter\"},/*#__PURE__*/React.createElement(FilterPrice,{setRank:this.setRank})),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(CardList,{items:items_array,region:this.state.region,category:this.state.category})));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/sze/Desktop/AnimalCrossingDB/src/containers/App.js"],"names":["React","Component","CardList","SearchBox","Region","Month","Category","FilterPrice","ReactSpinner","App","loadpage","fetch","state","category","then","response","json","items","setState","isLoading","onSearchChange","event","searchfield","target","value","setRegion","region","setMonth","month","setCategory","rank","setRank","choice","filterItem","array","filteredItem","filter","a","name","includes","sort","b","price","item","monthArray","availability","prevProps","prevState","items_array","Object","entries"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport CardList from '../components/CardList';\nimport SearchBox from '../components/SearchBox';\nimport {Region, Month, Category, FilterPrice} from '../components/Filter';\n// import Scroll from '../components/Scroll';\nimport './App.css';\nimport ReactSpinner from 'react-bootstrap-spinner'\n\nclass App extends Component {\n  constructor() {\n    super()\n    this.state = {\n      items: [],\n      searchfield: '',\n      region: '',\n      month: '',\n      category: 'fish',\n      rank: '',  //0图鉴顺序; 1从高到低; -1从低到高\n      isLoading: true\n    }\n  }\n\n    \n  loadpage = () => {\n    fetch(`https://acnhapi.com/v1/${this.state.category}/`)\n    .then(response=> response.json())\n      .then(items => {this.setState({ items: items, isLoading: false})})\n  }\n\n  componentDidMount() {\n    this.loadpage()\n  }\n\n  componentDidUpdate(prevProps, prevState){\n    // if (this.state.category === 'villagers') {\n    //   this.setState({region: '',\n    //   month: '',\n    //   rank: ''\n    // })\n    // }\n    this.loadpage()\n  }\n\n  onSearchChange = (event) => {\n    this.setState({ searchfield: event.target.value })\n  }\n\n  setRegion = (region) => {\n    this.setState({region: region});\n  }\n\n  setMonth = (month) => {\n    this.setState({month:month})\n  }\n\n  setCategory = (category) => {\n    this.setState({category:category, isLoading: true, \n      region: '',\n      month: '',\n      rank: ''})    \n  }\n\n  setRank = (choice) => {\n    this.setState({rank: choice})\n  }\n\n  filterItem = (array,searchfield) => {\n\n    // search filter\n    let filteredItem = array\n    filteredItem = array.filter(a =>{\n      return a[1].name['name-CNzh'].includes(searchfield);\n    })\n\n    if (this.state.category==='villagers') \n      {return filteredItem}\n\n    // rank filter\n      if (this.state.rank === 1) {\n        filteredItem = filteredItem.sort(function(a,b){return b[1].price-a[1].price}) \n      }\n      if (this.state.rank === -1) {\n        filteredItem = filteredItem.sort(function(a,b){return a[1].price-b[1].price}) \n      }\n    \n\n    // month filter\n    if (this.state.region !== '' && this.state.month !== '' ){\n      filteredItem = filteredItem.filter(item => {\n        const region = this.state.region===\n        'month-southern'?'month-array-southern':'month-array-northern'\n        const monthArray = item[1].availability[region]\n        return monthArray.includes(this.state.month)\n      })\n    }\n\n\n    return filteredItem\n  } \n\n  render() {\n    const { items, searchfield } = this.state;\n    let items_array = Object.entries(items);\n    items_array = this.filterItem(items_array,searchfield);\n\n    return this.state.isLoading ?\n      <div className='tc loading' >\n          <h1 >Loading</h1> \n          <ReactSpinner type=\"grow\" color=\"secondary\" />\n          <ReactSpinner type=\"grow\" color=\"secondary\" />\n          <ReactSpinner type=\"grow\" color=\"secondary\" />\n      </div>\n      : \n      (\n        <div className='tc'>\n          <h1 className='f1'>Animal Crossing</h1>\n            <div className=\"filter-row\">\n              <Region setRegion={this.setRegion}/>\n              <Month setMonth={this.setMonth}/>\n              <Category setCategory={this.setCategory}/>  \n              <SearchBox searchChange={this.onSearchChange}/>\n          </div> \n          <div className=\"filter\">\n          <FilterPrice setRank={this.setRank}/>\n          </div>\n            <div className=\"container\">       \n              <CardList items={items_array} region={this.state.region} category={this.state.category}/>\n            </div>\n        </div>\n      );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}